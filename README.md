# REST API на Go с использованием Chi и SQLite

Это простой REST API проект на языке Go, который использует роутер Chi и базу данных SQLite для управления пользователями и серверами.

## Зависимости

Проект использует следующие зависимости:
- [Chi](https://github.com/go-chi/chi) (v5) - лёгкий и удобный HTTP роутер для Go
- [SQLite3](https://github.com/mattn/go-sqlite3) - драйвер SQLite для Go

## База данных

Проект использует SQLite в качестве базы данных. База данных автоматически инициализируется при запуске приложения. Файл базы данных сохраняется как `users.db` в корневой директории проекта.

## Запуск проекта

Для запуска проекта выполните следующую команду:

```
go run main.go
```

После успешного запуска сервер будет доступен по адресу `http://localhost:8080`.

## Доступные эндпоинты

### GET /hello
Возвращает JSON с приветственным сообщением.

**Пример ответа:**
```json
{
  "message": "Hello, World!"
}
```

### Пользователи

#### POST /api/users
Создает нового пользователя.

**Тело запроса:**
```json
{
  "name": "Имя пользователя",
  "publicKey": "ssh-rsa AAAAB3Nza..."
}
```

**Пример ответа:**
```json
{
  "id": 1,
  "name": "Имя пользователя",
  "publicKey": "ssh-rsa AAAAB3Nza..."
}
```

#### GET /api/users
Возвращает список всех пользователей.

**Пример ответа:**
```json
[
  {
    "id": 1,
    "name": "Имя пользователя",
    "publicKey": "ssh-rsa AAAAB3Nza..."
  },
  {
    "id": 2,
    "name": "Другой пользователь",
    "publicKey": "ssh-rsa AAAAC4Ntc..."
  }
]
```

#### GET /api/users/{id}
Возвращает информацию о пользователе по ID.

**Пример ответа:**
```json
{
  "id": 1,
  "name": "Имя пользователя",
  "publicKey": "ssh-rsa AAAAB3Nza..."
}
```

### Серверы

#### POST /api/servers
Создает новый сервер.

**Тело запроса:**
```json
{
  "ip": "192.168.1.100"
}
```

**Пример ответа:**
```json
{
  "id": 1,
  "ip": "192.168.1.100"
}
```

#### GET /api/servers
Возвращает список всех серверов.

**Пример ответа:**
```json
[
  {
    "id": 1,
    "ip": "192.168.1.100"
  },
  {
    "id": 2,
    "ip": "192.168.1.101"
  }
]
```

#### GET /api/servers/{id}
Возвращает информацию о сервере по ID.

**Пример ответа:**
```json
{
  "id": 1,
  "ip": "192.168.1.100"
}
```

### Управление доступом пользователей к серверам

#### GET /api/users/{userId}/servers
Возвращает список всех серверов, доступных пользователю.

**Пример ответа:**
```json
[
  {
    "id": 1,
    "ip": "192.168.1.100"
  },
  {
    "id": 2,
    "ip": "192.168.1.101"
  }
]
```

#### POST /api/users/{userId}/servers/{serverId}
Привязывает сервер к пользователю.

**Ответ:** 200 OK

#### DELETE /api/users/{userId}/servers/{serverId}
Удаляет привязку сервера к пользователю.

**Ответ:** 200 OK

## Сборка проекта

Для сборки исполняемого файла выполните:

```
go build
```

После выполнения этой команды будет создан исполняемый файл, который можно запустить. 